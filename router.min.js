const Router=(()=>{class a{constructor(b=void 0){this.routes=b,this.defaulRoute=this.getDefaulRoute,this.links=[],this.componentNames=new Set,this.__setGlobalAliases(),this.detectMountPlace(),this._clickWatching(),this._popWatching(),this.render()}get version(){return'0.2.2-beta'}get getLocation(){return{hash:location.hash,href:location.href,origin:location.origin,path:location.pathname,search:location.search}}__setGlobalAliases(){window.$routes=this.routes}getComponents(){if(this.routes){let b=this.routes.find(c=>c.path==this.getLocation.path);return b?b:this.defaulRoute}const b=new Error('STR-Warn: \u041D\u0435 \u0437\u0430\u0434\u0430\u043D\u044B \u043C\u0430\u0440\u0448\u0440\u0443\u0442\u044B. Routes are not defined.');console.warn(b.message)}get getDefaulRoute(){let b;if(this.routes&&(b=this.routes.find(c=>'*'==c.path)),!b){const c=new Error('STR-Warn: \u041D\u0435 \u0437\u0430\u0434\u0430\u043D \u043C\u0430\u0440\u0448\u0440\u0443\u0442 \u043F\u043E-\u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E. Default route is not defined.');console.warn(c.message)}return b}detectMountPlace(){if(0==document.getElementsByTagName('router-view').length){const b=new Error('STR-Warn: \u041D\u0435 \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u044B \u0442\u043E\u0447\u043A\u0438 \u043C\u043E\u043D\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F. Missing "<router-view>" tag.');console.warn(b.message)}}_setMountPlace(){let b=document.getElementsByTagName('router-view');for(let d=0;d<b.length;d++){this.componentNames.add(b[d].getAttribute('name'));let f=document.createElement('div');f.setAttribute('name',`component-${b[d].getAttribute('name')}`),b[d].insertAdjacentElement('beforebegin',f)}let c=()=>{for(let d=0;d<document.getElementsByTagName('router-view').length;d++)document.getElementsByTagName('router-view')[d].remove();0<document.getElementsByTagName('router-view').length&&c()};c()}_clearMountPlace(){this.componentNames.forEach(b=>{document.getElementsByName(`component-${b}`).forEach(c=>c.innerHTML='')})}_comparing(b){return /^[^\s]+[a-z0-9а-яё]+?<.+?>/i.test(b)||/<\/.+>[a-z0-9а-яё]+?[^\s]+/i.test(b)}_setVirtualDom(b){if(0<b.childElementCount){b.children.forEach=[].forEach;let c=[],d='',f='';return b.children.forEach(g=>{f=g.tagName.toString().toLowerCase(),c.push({attributes:0==g.attributes.length?[]:(()=>{let h=[];return g.getAttributeNames().forEach(j=>{h.push({[j]:'hidden'==j||g.getAttribute(j)}),'router-view'==f&&(d=g.getAttribute(j))}),h})(),tag:f,component:'router-view'==f?d:'',content:this._comparing(g.innerHTML)?g.innerHTML:'',children:0==g.childElementCount||'router-view'==f||this._comparing(g.innerHTML)?[]:(()=>this._setVirtualDom(g))()})}),c}return[]}_runMethods(b){const c=/[^{]+(?=}})/ig;let d=b.template;const f=b.methods;let h,g=[];for(;null!==(h=c.exec(d));)g=g.concat(h);return null!==g&&g.forEach(j=>{f&&f[j]&&(d=d.replace(RegExp(`{{${j}}}`),f[j]()))}),d}render(){if(this._setMountPlace(),!!this.getComponents()){this._clearMountPlace();let b=this.getComponents();this.componentNames.forEach(c=>{if(b.components.hasOwnProperty(c)){let d=(()=>{switch(typeof b.components[c]){case'function':return b.components[c]();case'object':return b.components[c];}})(),f=this._runMethods(d);document.getElementsByName(`component-${c}`).forEach(g=>g.insertAdjacentHTML('beforeend',f))}})}}_pushLinkToHistory(b,c){this.links.push(c),history.pushState(b,'',c)}_popWatching(){window.onpopstate=()=>{this.render()}}_clickWatching(){document.addEventListener('click',c=>{'A'==c.target.tagName&&(c.preventDefault(),this._pushLinkToHistory('',c.target.toString()),this.render())})}}return a})();export default Router;